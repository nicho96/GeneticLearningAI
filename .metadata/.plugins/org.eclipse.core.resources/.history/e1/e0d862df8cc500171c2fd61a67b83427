package ca.nicho.xor;

import java.util.Random;

import ca.nicho.neat.DefaultNEAT;
import ca.nicho.neat.SpeciationNEAT;
import ca.nicho.neuralnet.NeuralNetwork;

public class XORAI {
	
	public static void main(String[] s){
		
		NeuralNetwork origin = new NeuralNetwork(2, 1, 1);
		
		SpeciationNEAT neat = new SpeciationNEAT(origin, delegate);

		int generation = 0;
		while(true){
			generation++;
			System.out.println("==== Current Generation: " + generation + " ====");
			neat.nextGeneration();
		}
		
	}
	
	private static DefaultNEAT.SimulateDelegate delegate = (NeuralNetwork network) -> {
		double score = 0;
			
		for(int i1 = 0; i1 < 2; i1++){
			for(int i2 = 0; i2 < 0; i2++){
				int value = i1 ^ i2;
				score += 1 - Math.abs(network.outputs[0].value - value);
			}
		}
		network.updateInputs(new double[]{i1, i2});
		network.updateLayers();
								
		network.score = (int)(score * 100);
	};

}
